{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 78997878111223291765","webpack:///./src/index.js","webpack:///external \"firebase\"","webpack:///external {\"root\":\"_\",\"amd\":\"lodash\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\"}","webpack:///external \"updeep\"","webpack:///./~/google-analytics-js/gajs.js"],"names":["window","FIREDUX_OPTIONS","noTrack","localStorage","initialState","data","splitUrl","url","split","Firedux","options","that","console","warn","v3","SDK_VERSION","substr","auth","ref","toString","slice","omit","token","getting","removing","watching","actionId","dispatch","userAuth","makeFirebaseState","action","state","path","value","merge","dataPath","concat","constant","newState","updateIn","removeFirebaseState","dataSplit","setValue","get","id","pop","parentPath","join","child","off","keyPath","reducer","type","snapshot","val","error","authData","authError","isObject","Promise","resolve","reject","getItem","login","onAuthStateChanged","user","removeItem","isFunction","onAuth","credentials","handleError","handler","setItem","refreshToken","email","password","signInWithEmailAndPassword","then","catch","authWithCustomToken","authWithPassword","handleLogout","handleLogoutError","signOut","unauth","onComplete","on","once","newValue","cleanValue","set","update","v","remove","toPath","onId","newId","pushRef","push","replace","key","toRef"],"mappings":"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","file":"index.browser.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"firebase\"), require(\"lodash\"), require(\"updeep\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"firedux\", [\"firebase\", \"lodash\", \"updeep\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"firedux\"] = factory(require(\"firebase\"), require(\"lodash\"), require(\"updeep\"));\n\telse\n\t\troot[\"firedux\"] = factory(root[\"firebase\"], root[\"_\"], root[\"updeep\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 78997878111223291765","import Firebase from 'firebase'\nimport _ from 'lodash'\nimport updeep from 'updeep'\nimport gaTrack from 'google-analytics-js'\n// import _debug from 'debug'\n// const debug = _// debug('firedux')\n\nif (typeof window !== 'undefined') {\n  if (!(window.FIREDUX_OPTIONS && window.FIREDUX_OPTIONS.noTrack)) {\n    gaTrack('UA-82065077-1', 'github.com', '/adjohnson916/firedux/src/index.js')\n  }\n}\n\nconst localStorage = typeof window === 'object' ? window.localStorage : null\n\nconst initialState = {\n  data: {}\n}\n\nfunction splitUrl (url) {\n  return url.split(/\\//)\n}\n\n// function urlToKeyPath (url) {\n//   const keyPath = splitUrl(url).join('.')\n//   return keyPath\n// }\n\nexport default class Firedux {\n  constructor (options) {\n    const that = this\n    if (options.url) {\n      console.warn('Firedux option \"url\" is deprecated, use \"ref\" instead.')\n    }\n\n    this.v3 = Firebase.SDK_VERSION.substr(0, 2) === '3.'\n\n    if (this.v3) {\n        this.auth = Firebase.auth// eslint-disable-line\n    }\n\n    this.url = options.url || options.ref.toString()\n    this.ref = options.ref || new Firebase(this.url)\n    if (this.url.slice(-1) !== '/') {\n      this.url += '/'\n    }\n    this.omit = options.omit || []\n    this.token = null\n    this.getting = {}\n    this.removing = {}\n    this.watching = {}\n    this.actionId = 0\n    this.dispatch = null\n    this.userAuth = null\n\n    function makeFirebaseState (action, state, path, value, merge = false) {\n      // const keyPath = urlToKeyPath(path)\n      // const dataPath = 'data.' + keyPath\n      const dataPath = ['data'].concat(splitUrl(path))\n      // const statusPath = 'status.' + keyPath\n      // debug('MAKE FIREBASE STATE FOR ACTION', action.type, 'VALUE', keyPath, value, 'merge', merge)\n      value = merge ? value : updeep.constant(value)\n      const newState = updeep.updateIn(dataPath, value, state)\n      return newState\n    }\n\n    function removeFirebaseState (action, state, path) {\n      const split = splitUrl(path)\n      const dataSplit = ['data'].concat(split)\n\n      // get & set value for restore in case of error\n      // TODO: Find a cleaner way to do this.\n      action.setValue(_.get(state, dataSplit))\n\n      const id = split.pop()\n      const parentPath = split.join('.')\n      that.ref.child(path).off()\n      const keyPath = parentPath\n      const dataPath = 'data.' + keyPath\n      const newState = updeep.updateIn(dataPath, updeep.omit(id), state)\n      return newState\n    }\n\n    this.reducer = function reducer () {\n      return function (state = initialState, action) {\n        // debug('FIREBASE ACTION', action.type, action)\n        switch (action.type) {\n          case 'FIREBASE_GET':\n          case 'FIREBASE_WATCH':\n            return makeFirebaseState(action, state, action.path, action.snapshot.val())\n          case 'FIREBASE_SET':\n          case 'FIREBASE_PUSH':\n            return makeFirebaseState(action, state, action.path, action.value)\n          case 'FIREBASE_UPDATE':\n            return makeFirebaseState(action, state, action.path, action.value, true)\n          case 'FIREBASE_REMOVE':\n            return removeFirebaseState(action, state, action.path)\n          case 'FIREBASE_SET_RESPONSE':\n          case 'FIREBASE_UPDATE_RESPONSE':\n          case 'FIREBASE_REMOVE_RESPONSE':\n            // TODO: Error handling, at per-path level, somehow async without clobber, maybe queues?\n            if (action.error) {\n              console.error(action.error)\n              // restore state\n              return makeFirebaseState(action, state, action.path, action.value)\n            }\n            return state\n          case 'FIREBASE_PUSH_RESPONSE':\n            if (action.error) {\n              // return removeFirebaseState(action, state, action.path)\n            }\n            return state\n          case 'FIREBASE_LOGIN':\n          case 'FIREBASE_LOGIN_ERROR':\n          case 'FIREBASE_LOGOUT':\n          case 'FIREBASE_LOGOUT_ERROR':\n            return updeep({\n              authData: action.authData,\n              authError: action.error\n            }, state)\n          default:\n            return state\n        }\n      }\n    }\n\n    return this\n  }\n  cleanValue (value) {\n    return _.isObject(value) ? _.omit(value, this.omit) : value\n  }\n  init () {\n    const { dispatch } = this\n    const that = this\n    return new Promise((resolve, reject) => {\n      this.token = localStorage.getItem('FIREBASE_TOKEN')\n      if (this.token) {\n        resolve(this.login(dispatch, {\n          token: this.token\n        }))\n      }\n\n      if (this.v3) {\n        const auth = this.auth()\n\n        auth.onAuthStateChanged(user => {\n          if (user) {\n            this.userAuth = user\n            resolve(user)\n          } else {\n            localStorage.removeItem('FIREBASE_TOKEN')\n            that.authData = null\n            dispatch({type: 'FIREBASE_LOGOUT'})\n            reject()\n          }\n        })\n      }\n\n      // listen for auth changes\n      if (_.isFunction(this.ref.onAuth)) {\n        this.ref.onAuth(function (authData) {\n          // debug('FB AUTH DATA', authData)\n          if (!authData) {\n            localStorage.removeItem('FIREBASE_TOKEN')\n            that.authData = null\n            dispatch({type: 'FIREBASE_LOGOUT'})\n            reject()\n          }\n          resolve(authData)\n        })\n      }\n    })\n  }\n  login (credentials) {\n    const { dispatch } = this\n    const that = this\n    return new Promise((resolve, reject) => {\n      dispatch({type: 'FIREBASE_LOGIN_ATTEMPT'})\n\n      const handleError = function (error, authData = {}) {\n        console.error('FB AUTH ERROR', error, authData)\n        dispatch({type: 'FIREBASE_LOGIN_ERROR', error})\n        reject(error)\n      }\n\n      const handler = function (error, authData) {\n        // TODO: Error handling.\n        // debug('FB AUTH', error, authData)\n\n        if (error) return handleError(error)\n\n        localStorage.setItem('FIREBASE_TOKEN', (authData.token || authData.refreshToken))\n        that.authData = authData\n        dispatch({type: 'FIREBASE_LOGIN', authData: authData, error: error})\n        resolve(authData)\n      }\n\n      try {\n        if (!credentials) {\n          reject()\n          return\n        }\n        if (this.v3) {\n          if (!credentials.email && !credentials.password) {\n            reject()\n            return\n          }\n          // TODO add custom later...\n          this.auth()\n            .signInWithEmailAndPassword(credentials.email, credentials.password)\n            .then(authData => handler(null, authData))\n            .catch(error => handleError(error))\n        } else if (credentials.token) {\n          this.ref.authWithCustomToken(this.token, handler)\n        } else {\n          this.ref.authWithPassword(credentials, handler)\n        }\n      } catch (error) {\n        console.error('FB AUTH ERROR', error)\n        dispatch({type: 'FIREBASE_LOGIN_ERROR', error})\n        reject(error)\n      }\n    })\n  }\n  logout () {\n    const { dispatch } = this\n\n    return new Promise((resolve, reject) => {\n      dispatch({type: 'FIREBASE_LOGOUT_ATTEMPT'})\n\n      const handleLogout = function () {\n        this.authData = null\n        this.authError = null\n        dispatch({type: 'FIREBASE_LOGOUT'})\n        resolve()\n      }\n\n      const handleLogoutError = function (error) {\n        dispatch({type: 'FIREBASE_LOGOUT_ERROR', error})\n        if (error) reject(error)\n        else resolve()\n      }\n\n      if (this.v3) {\n        this.auth().signOut()\n        .then(handleLogout, handleLogoutError)\n      } else {\n        this.ref.unauth() // no callbacks for old firebase :(\n        handleLogout()\n      }\n    })\n  }\n  watch (path, onComplete) {\n    const { dispatch } = this\n    return new Promise((resolve) => {\n      if (this.watching[path]) {\n        // // debug('already watching', path)\n        return false\n      }\n      this.watching[path] = true\n      // debug('DISPATCH WATCH', path)\n      this.ref.child(path).on('value', snapshot => {\n        // debug('GOT WATCHED VALUE', path, snapshot.val())\n        // TODO: Make watches smart enough to ignore pending updates, e.g. not replace\n        //  a path that has been removed locally but is queued for remote delete?\n        dispatch({\n          type: 'FIREBASE_WATCH',\n          path: path,\n          snapshot: snapshot\n        })\n\n        if (onComplete) onComplete(snapshot)\n        resolve({snapshot: snapshot})\n      })\n    })\n  }\n  get (path, onComplete) {\n    const { dispatch } = this\n    return new Promise((resolve) => {\n      if (this.getting[path]) {\n        // debug('already getting', path)\n        return { type: 'FIREBASE_GET_PENDING' }\n      }\n      this.getting[path] = true\n      // debug('FB GET', path)\n      this.ref.child(path).once('value', snapshot => {\n        this.getting[path] = false\n        dispatch({\n          type: 'FIREBASE_GET',\n          path: path,\n          snapshot: snapshot\n        })\n        if (onComplete) onComplete(snapshot)\n        resolve({snapshot: snapshot})\n      })\n    })\n  }\n  set (path, value, onComplete) {\n    const { dispatch } = this\n    return new Promise((resolve, reject) => {\n      const newValue = this.cleanValue(value)\n      // debug('FB SET', path, newValue)\n      // optimism\n      dispatch({\n        type: 'FIREBASE_SET',\n        path: path,\n        value: newValue\n      })\n      this.ref.child(path).set(newValue, error => {\n        dispatch({\n          type: 'FIREBASE_SET_RESPONSE',\n          path: path,\n          value: newValue,\n          error: error\n        })\n        if (onComplete) onComplete(error)\n        if (error) reject(error)\n        else resolve({value: newValue})\n      })\n    })\n  }\n  update (path, value, onComplete) {\n    const { dispatch } = this\n    return new Promise((resolve, reject) => {\n      const newValue = this.cleanValue(value)\n      // debug('FB UPDATE', path, newValue)\n      // optimism\n      dispatch({\n        type: 'FIREBASE_UPDATE',\n        path: path,\n        value: newValue\n      })\n      this.ref.child(path).update(newValue, error => {\n        dispatch({\n          type: 'FIREBASE_UPDATE_RESPONSE',\n          path: path,\n          value: newValue,\n          error: error\n        })\n        if (onComplete) onComplete(error)\n        if (error) reject(error)\n        else resolve({value: newValue})\n      })\n    })\n  }\n  remove (path, onComplete) {\n    const { dispatch } = this\n    return new Promise((resolve, reject) => {\n      if (this.removing[path]) {\n        // debug('already removing', path)\n        return { type: 'FIREBASE_REMOVE_PENDING' }\n      }\n      this.removing[path] = true\n      // debug('FB remove', path)\n\n      let value\n\n      // optimism\n      dispatch({\n        type: 'FIREBASE_REMOVE',\n        path: path,\n        // TODO: How to access state for cleaner rollback?\n        // eslint-disable-next-line no-return-assign\n        setValue: (v) => value = v\n      })\n      this.ref.child(path).remove((error) => {\n        this.removing[path] = false\n        dispatch({\n          type: 'FIREBASE_REMOVE_RESPONSE',\n          path: path,\n          value: value,\n          error: error\n        })\n        if (onComplete) onComplete(error)\n        if (error) reject(error)\n        else resolve()\n      })\n    })\n  }\n  push (toPath, value, onId, onComplete) {\n    const { dispatch } = this\n    const that = this\n    const newValue = this.cleanValue(value)\n\n    return new Promise((resolve, reject) => {\n      // debug('FB PUSH', toPath, newValue)\n\n      let path, newId\n      const ref = that.ref.child(toPath)\n      const pushRef = ref.push(newValue, (error) => {\n        dispatch({\n          type: 'FIREBASE_PUSH_RESPONSE',\n          path: path,\n          toPath: toPath,\n          newId: newId,\n          value: newValue,\n          error: error\n        })\n        if (onComplete) onComplete(error, newId)\n        if (error) reject(error)\n        else resolve(newId)\n      })\n      path = pushRef.toString().replace(that.url, '')\n      // function in firebase@2, property in firebase@3\n      newId = _.isFunction(pushRef, 'key') ? pushRef.key() : pushRef.key\n      if (onId) onId(newId)\n\n      // optimism\n      dispatch({\n        type: 'FIREBASE_PUSH',\n        path: path,\n        toPath: toPath,\n        newId: newId,\n        value: newValue,\n        ref: pushRef,\n        toRef: ref\n      })\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"firebase\"\n// module id = 1\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"_\",\"amd\":\"lodash\",\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\"}\n// module id = 2\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"updeep\"\n// module id = 3\n// module chunks = 0","// https://github.com/umdjs/umd/blob/master/templates/returnExportsGlobal.js\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], function () {\n            return (root.gaTrack = factory());\n        });\n    } else if (typeof module === 'object' && module.exports) {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else {\n        // Browser globals\n        root.gaTrack = factory();\n    }\n}(this, function () {\n    /**\n     * Google Analytics JS v1\n     * http://code.google.com/p/google-analytics-js/\n     * Copyright (c) 2009 Remy Sharp remysharp.com / MIT License\n     * $Date: 2009-02-25 14:25:01 +0000 (Wed, 25 Feb 2009) $\n     */\n    function gaTrack(urchinCode, domain, url) {\n        function rand(min, max) {\n            return min + Math.floor(Math.random() * (max - min));\n        }\n        \n        if (!this.Image) return;\n\n        var i=1000000000,\n            utmn=rand(i,9999999999), //random request number\n            cookie=rand(10000000,99999999), //random cookie number\n            random=rand(i,2147483647), //number under 2147483647\n            today=(new Date()).getTime(),\n            win = this.location,\n            img = new this.Image(),\n            urchinUrl = 'https://www.google-analytics.com/__utm.gif?utmwv=1.3&utmn='\n                +utmn+'&utmsr=-&utmsc=-&utmul=-&utmje=0&utmfl=-&utmdt=-&utmhn='\n                +domain+'&utmr='+win+'&utmp='\n                +url+'&utmac='\n                +urchinCode+'&utmcc=__utma%3D'\n                +cookie+'.'+random+'.'+today+'.'+today+'.'\n                +today+'.2%3B%2B__utmb%3D'\n                +cookie+'%3B%2B__utmc%3D'\n                +cookie+'%3B%2B__utmz%3D'\n                +cookie+'.'+today\n                +'.2.2.utmccn%3D(referral)%7Cutmcsr%3D' + win.host + '%7Cutmcct%3D' + win.pathname + '%7Cutmcmd%3Dreferral%3B%2B__utmv%3D'\n                +cookie+'.-%3B';\n\n        // trigger the tracking\n        img.src = urchinUrl;\n    }\n\n    return gaTrack;\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/google-analytics-js/gajs.js\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}